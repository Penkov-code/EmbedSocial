<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <script type="text/javascript" src="data.json"></script>
  </head>
  <!-- <style>
    .card {
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        transition: 0.3s;
        display: inline-block;
        width:25%;
        margin-right:-4px;
    }
    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
    }
    .container {
        padding: 2px 16px;
    }
    .everything{
        margin-left: 5%;
        margin-right: 5%;
    }        
</style> -->
  <body>
    <div class="container" id="container"></div>
    <div class="modal-container" id="modal-container"></div>
    <button id="dugme" class="btn" type="button">Load More</button>
  </body>
  <script type="module">
    let data = [
      {
        image: "https://placekitten.com/600/400",
        caption:
          "Duis in facilisis lectus. Nulla molestie erat erat, quis tempor enim sodales vitae. Sed tempus, libero fringilla rhoncus ullamcorper, justo elit dignissim ex, nec elementum quam sem in urna.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2018-03-12 03:00:00",
        likes: "123",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/100/100",
      },
      {
        image: "https://placekitten.com/600/410",
        caption:
          "Quisque metus nisi, consequat et molestie eget, facilisis ac odio. Nam lorem libero, efficitur ac velit at, egestas tempor arcu. Nullam pharetra ex eget orci lobortis malesuada. Maecenas eget porta felis. Aliquam porttitor, nibh nec ullamcorper fermentum, eros velit lobortis justo, pretium consectetur turpis enim ut nunc. Fusce convallis, ex ut ultrices sodales, ante quam venenatis arcu, vitae mollis magna urna vel eros. Aliquam a sapien nisi. Nullam convallis malesuada suscipit. ",
        type: "image",
        source_type: "instagram",
        source_link: "https://instagram.com/embedsocial/",
        date: "2019-01-12 03:00:00",
        likes: "0",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/150/100",
      },
      {
        image: "https://placekitten.com/600/420",
        caption: "",
        type: "image",
        source_type: "facebook",
        source_link: "https://instagram.com/embedsocial/",
        date: "2017-01-21 03:00:00",
        likes: "9866555",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/100/150",
      },
      {
        image: "https://placekitten.com/600/430",
        caption:
          "Etiam eu blandit nisi. Aliquam rutrum faucibus mauris, sed egestas odio viverra at. In elementum sit amet sapien vitae bibendum.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-12-12 03:00:00",
        likes: "2",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/120/120",
      },
      {
        image: "https://placekitten.com/600/440",
        caption:
          "Vivamus a sem sit amet nisi pretium pretium. Curabitur blandit ut lectus non bibendum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris leo odio, consectetur a lorem vitae, aliquet placerat orci. Phasellus varius ante sit amet quam mollis, eu efficitur tortor blandit.",
        type: "image",
        source_type: "facebook",
        source_link: "https://instagram.com/embedsocial/",
        date: "2018-04-12 03:00:00",
        likes: "12343",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/50/50",
      },
      {
        image: "https://placekitten.com/600/440",
        caption:
          "Duis in facilisis lectus. Nulla molestie erat erat, quis tempor enim sodales vitae. Sed tempus, libero fringilla rhoncus ullamcorper, justo elit dignissim ex, nec elementum quam sem in urna.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-12-12 03:00:00",
        likes: "123",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/101/101",
      },
      {
        image: "https://placekitten.com/800/400",
        caption:
          "Duis in facilisis lectus. Nulla molestie erat erat, quis tempor enim sodales vitae. Sed tempus, libero fringilla rhoncus ullamcorper, justo elit dignissim ex, nec elementum quam sem in urna.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-12-12 03:00:00",
        likes: "12",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/150/120",
      },
      {
        image: "https://placekitten.com/600/500",
        caption:
          "Vivamus a sem sit amet nisi pretium pretium. Curabitur blandit ut lectus non bibendum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris leo odio, consectetur a lorem vitae, aliquet placerat orci. Phasellus varius ante sit amet quam mollis, eu efficitur tortor blandit.",
        type: "image",
        source_type: "facebook",
        source_link: "https://instagram.com/embedsocial/",
        date: "2017-12-12 03:00:00",
        likes: "23",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/140/140",
      },
      {
        image: "https://placekitten.com/700/400",
        caption:
          "Pellentesque lacinia volutpat turpis non fermentum. Cras at pellentesque augue. Aliquam eget metus sit amet turpis consectetur posuere.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2017-12-08 03:00:00",
        likes: "0",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/100/100",
      },
      {
        image: "https://placekitten.com/700/500",
        caption:
          "Duis in facilisis lectus. Nulla molestie erat erat, quis tempor enim sodales vitae. Sed tempus, libero fringilla rhoncus ullamcorper, justo elit dignissim ex, nec elementum quam sem in urna.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-02-12 03:00:00",
        likes: "0",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/102/102",
      },
      {
        image: "https://placekitten.com/800/600",
        caption:
          "Aliquam odio libero, malesuada et iaculis a, facilisis bibendum dolor. Vivamus ultricies congue arcu eu porttitor. Integer libero tortor, volutpat a purus id, mattis tristique tortor. ",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-12-12 03:00:00",
        likes: "2",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/103/100",
      },
      {
        image: "https://placekitten.com/700/600",
        caption: "Duis in facilisis lectus.",
        type: "image",
        source_type: "facebook",
        source_link: "https://instagram.com/embedsocial/",
        date: "2020-12-12 03:00:00",
        likes: "1",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/40/100",
      },
      {
        image: "https://placekitten.com/1600/1400",
        caption:
          "Nulla molestie erat erat, quis tempor enim sodales vitae. Sed tempus, libero fringilla rhoncus ullamcorper, justo elit dignissim ex, nec elementum quam sem in urna.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-12-15 03:00:00",
        likes: "2324",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/80/100",
      },
      {
        image: "https://placekitten.com/1600/400",
        caption:
          "Aliquam odio libero, malesuada et iaculis a, facilisis bibendum dolor.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-10-12 03:00:00",
        likes: "1223",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/80/80",
      },
      {
        image: "https://placekitten.com/2000/4000",
        caption:
          "Quis tempor enim sodales vitae. Sed tempus, libero fringilla rhoncus ullamcorper, justo elit dignissim ex, nec elementum quam sem in urna.",
        type: "image",
        source_type: "facebook",
        source_link: "https://instagram.com/embedsocial/",
        date: "2016-12-12 03:00:00",
        likes: "12223",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/110/110",
      },
      {
        image: "https://placekitten.com/900/600",
        caption:
          " Suspendisse finibus lorem nibh, facilisis ullamcorper nunc consequat sit amet. Curabitur ultricies magna ante, ac eleifend lorem auctor porta. Nullam volutpat aliquet lorem, et posuere ex aliquet eu. Quisque elementum sem mauris, a mattis est scelerisque vitae. Interdum et malesuada fames ac ante ipsum primis in faucibus. Ut quis massa eget ligula euismod sagittis id congue quam. Duis vestibulum eros sed tincidunt rutrum. Pellentesque in malesuada velit.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2017-12-12 03:00:00",
        likes: "0",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/110/100",
      },
      {
        image: "https://placekitten.com/600/410",
        caption:
          "Quisque metus nisi, consequat et molestie eget, facilisis ac odio. Nam lorem libero, efficitur ac velit at, egestas tempor arcu. Nullam pharetra ex eget orci lobortis malesuada. Maecenas eget porta felis. Aliquam porttitor, nibh nec ullamcorper fermentum, eros velit lobortis justo, pretium consectetur turpis enim ut nunc. Fusce convallis, ex ut ultrices sodales, ante quam venenatis arcu, vitae mollis magna urna vel eros. Aliquam a sapien nisi. Nullam convallis malesuada suscipit. ",
        type: "image",
        source_type: "instagram",
        source_link: "https://instagram.com/embedsocial/",
        date: "2019-01-12 03:00:00",
        likes: "0",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/150/100",
      },
      {
        image: "https://placekitten.com/600/420",
        caption: "",
        type: "image",
        source_type: "facebook",
        source_link: "https://instagram.com/embedsocial/",
        date: "2017-01-21 03:00:00",
        likes: "9866555",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/100/150",
      },
      {
        image: "https://placekitten.com/600/430",
        caption:
          "Etiam eu blandit nisi. Aliquam rutrum faucibus mauris, sed egestas odio viverra at. In elementum sit amet sapien vitae bibendum.",
        type: "image",
        source_type: "facebook",
        source_link: "https://www.facebook.com/EmbedSocial/",
        date: "2019-12-12 03:00:00",
        likes: "2",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/120/120",
      },
      {
        image: "https://placekitten.com/600/440",
        caption:
          "Vivamus a sem sit amet nisi pretium pretium. Curabitur blandit ut lectus non bibendum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris leo odio, consectetur a lorem vitae, aliquet placerat orci. Phasellus varius ante sit amet quam mollis, eu efficitur tortor blandit.",
        type: "image",
        source_type: "facebook",
        source_link: "https://instagram.com/embedsocial/",
        date: "2018-04-12 03:00:00",
        likes: "12343",
        name: "John Smith",
        profile_image: "https://placekitten.com/g/50/50",
      },
    ];
    console.log(data.length);
    let newData = data.map((item, index) => Object.assign(item, { index }));
    var jsonData = JSON.stringify(data);
    jsonData = JSON.parse(jsonData);
    let dugme = document.getElementById("dugme");
    var i = 0;
    var counter = 0;
    var heartcounter = -1;

    dugme.addEventListener("click", (event) => {
      for (i = counter; i < counter + 4; i++) {
        var image = jsonData[i].image;
        var type = jsonData[i].type;
        var source_type = jsonData[i].source_type;
        var source_link = jsonData[i].source_link;
        var date = jsonData[i].date;
        var name = jsonData[i].name;
        var profile_image = jsonData[i].profile_image;
        var likes = jsonData[i].likes;
        var caption = jsonData[i].caption;

        const card = document.createElement("div");
        card.classList.add("card");
        card.setAttribute("id", JSON.stringify("card" + i));
        const top = document.createElement("div");
        top.classList.add("top");
        console.log(JSON.stringify("top" + i));
        top.setAttribute("id", JSON.stringify("top" + i));
        const userDetails = document.createElement("div");
        userDetails.classList.add("userDetails");
        userDetails.setAttribute("id", JSON.stringify("userDetails" + i));
        const profile_img = document.createElement("div");
        profile_img.classList.add("profile_img");
        profile_img.setAttribute("id", JSON.stringify("profile_img" + i));
        let pfp = document.createElement("img");
        pfp.classList.add("cover");
        console.log(profile_image);
        pfp.setAttribute("src", profile_image);

        const info = document.createElement("heading");
        info.setAttribute("id", JSON.stringify("Name" + i));
        info.textContent = name;
        console.log(info);
        const br = document.createElement("br");
        const span = document.createElement("span");
        span.setAttribute("id", JSON.stringify("Date" + i));
        span.textContent = date;
        const testdiv = document.createElement("div");
        testdiv.classList.add("testDiv");
        testdiv.setAttribute("id", JSON.stringify("testDiv" + i));
        const instalogo = document.createElement("img");
        instalogo.setAttribute("src", "./images/instagram-logo.svg");

        const imageBox = document.createElement("div");
        imageBox.classList.add("imgBox");
        imageBox.setAttribute("id", JSON.stringify("imgBox" + i));
        const postedPic = document.createElement("img");
        postedPic.setAttribute("src", image);
        postedPic.classList.add("cover");
        const header4 = document.createElement("header");
        header4.classList.add("message");
        header4.setAttribute("id", JSON.stringify("message" + i));
        const b = document.createElement("b");
        var text;
        var last;
        if (caption.length > 200) {
          text = caption.substring(0, 200);
          last = text.lastIndexOf(" ");
          text = text.substring(0, last);
          text = text + ` (...)`;
          header4.textContent = text;
        } else {
          header4.textContent = caption;
        }

        const hr = document.createElement("hr");

        const divAction = document.createElement("div");
        divAction.classList.add("actionBtns");
        divAction.setAttribute("id", JSON.stringify("actionBtns" + i));
        const divLeft = document.createElement("div");
        divLeft.classList.add("left");
        divLeft.setAttribute("id", JSON.stringify("left" + i));
        const heart = document.createElement("img");
        heart.setAttribute("src", "./images/heart.svg");
        heart.classList.add("heart");
        heart.setAttribute("id", JSON.stringify(i));

        const header5 = document.createElement("header");
        header5.classList.add("likes");
        header5.setAttribute("id", JSON.stringify("likes" + i));
        header5.textContent = likes;

        heart.onclick = function () {
          console.log("test");
          var testlike = JSON.parse(jsonData[heart.id]["likes"]);
          console.log(heart.id);
          console.log(header5.textContent);
          if (header5.textContent == testlike) {
            heart.setAttribute("src", "./images/Heart.png");
            header5.textContent = testlike + 1;
            console.log(header5.textContent);
          } else {
            heart.setAttribute("src", "./images/heart.svg");
            header5.textContent = header5.textContent - 1;
          }
        };

        imageBox.onclick = function () {
          const cardmodal = document.createElement("div");
          cardmodal.setAttribute("id", JSON.stringify("card-modal" + i));
          cardmodal.classList.add("card-modal");
          const imgBoxmodal = document.createElement("div");
          imgBoxmodal.classList.add("imgBox-modal");
          imgBoxmodal.setAttribute("id", JSON.stringify("imgBox-modal" + i));
          const stylemodal = document.createElement("div");
          stylemodal.classList.add("style-modal");
          stylemodal.setAttribute("id", JSON.stringify("style-modal" + i));
          const topmodal = document.createElement("div");
          topmodal.setAttribute("id", JSON.stringify("top-modal" + i));
          topmodal.classList.add("top-modal");
          const userDetailsmodal = document.createElement("div");
          userDetailsmodal.classList.add("userDetails-modal");
          userDetailsmodal.setAttribute(
            "id",
            JSON.stringify("userDetails-modal" + i)
          );
          const profile_imgmodal = document.createElement("div");
          profile_imgmodal.classList.add("profile_img-modal");
          profile_imgmodal.setAttribute(
            "id",
            JSON.stringify("profile_img-modal" + i)
          );
          const testDivmodal = document.createElement("div");
          testDivmodal.classList.add("testDiv-modal");
          testDivmodal.setAttribute("id", JSON.stringify("testDiv-modal" + i));
          const actionBtnsmodal = document.createElement("div");
          actionBtnsmodal.setAttribute(
            "id",
            JSON.stringify("actionBtns-modal" + i)
          );
          actionBtnsmodal.classList.add("actionBtns-modal");
          const leftmodal = document.createElement("div");
          leftmodal.classList.add("left-modal");
          leftmodal.setAttribute("id", JSON.stringify("left-modal" + i));
          const bigimagemodal = document.createElement("img");
          bigimagemodal.classList.add("cover-modal");
          bigimagemodal.setAttribute("id", "bigboi");
          bigimagemodal.setAttribute("src", jsonData[heart.id]["image"]);
          const pfpmodal = document.createElement("img");
          pfpmodal.classList.add("cover-modal");
          pfpmodal.setAttribute("src", jsonData[heart.id]["profile_image"]);
          const span_name = document.createElement("span");
          span_name.classList.add("span_name-modal");
          span_name.setAttribute("id", JSON.stringify("name-modal" + i));
          span_name.textContent = jsonData[heart.id]["name"];
          const span_date = document.createElement("span");
          span_date.classList.add("span_date-modal");
          span_date.setAttribute("id", JSON.stringify("date-modal" + i));
          span_date.textContent = jsonData[heart.id]["date"];
          const br = document.createElement("br");
          const hr2 = document.createElement("hr");
          hr2.classList.add("hr2");
          const header_text = document.createElement("header");

          var text2;
          var last2;
          if (jsonData[heart.id]["caption"].length > 200) {
            text2 = caption.substring(0, 200);
            last2 = text2.lastIndexOf(" ");
            text2 = text2.substring(0, last2);
            text2 = text2 + ` (...)`;
            header_text.textContent = text2;
          } else {
            header_text.textContent = jsonData[heart.id]["caption"];
          }
          header_text.classList.add("message-modal");
          const heart2 = document.createElement("img");
          heart2.setAttribute("src", "./images/heart.svg");
          const likes_text = document.createElement("header");
          likes_text.classList.add("likes-modal");
          likes_text.textContent = jsonData[heart.id]["likes"];
          const instalogomodal = document.createElement("img");
          instalogomodal.classList.add("Insta-modal");
          instalogomodal.setAttribute("src", "./images/instagram-logo.svg");

          document.getElementById("modal-container").appendChild(cardmodal);
          document
            .getElementById(JSON.stringify("card-modal" + i))
            .appendChild(imgBoxmodal);
          document
            .getElementById(JSON.stringify("imgBox-modal" + i))
            .appendChild(bigimagemodal);
          document
            .getElementById(JSON.stringify("card-modal" + i))
            .appendChild(stylemodal);
          document
            .getElementById(JSON.stringify("style-modal" + i))
            .appendChild(topmodal);
          document
            .getElementById(JSON.stringify("top-modal" + i))
            .appendChild(userDetailsmodal);
          document
            .getElementById(JSON.stringify("userDetails-modal" + i))
            .appendChild(profile_imgmodal);
          document
            .getElementById(JSON.stringify("profile_img-modal" + i))
            .appendChild(pfpmodal);
          document
            .getElementById(JSON.stringify("userDetails-modal" + i))
            .appendChild(span_name);
          document
            .getElementById(JSON.stringify("userDetails-modal" + i))
            .appendChild(br);
          document
            .getElementById(JSON.stringify("userDetails-modal" + i))
            .appendChild(span_date);
          document
            .getElementById(JSON.stringify("top-modal" + i))
            .appendChild(testDivmodal);
          document
            .getElementById(JSON.stringify("testDiv-modal" + i))
            .appendChild(instalogomodal);
          document
            .getElementById(JSON.stringify("style-modal" + i))
            .appendChild(hr2);
          document
            .getElementById(JSON.stringify("style-modal" + i))
            .appendChild(header_text);
          document
            .getElementById(JSON.stringify("style-modal" + i))
            .appendChild(actionBtnsmodal);
          document
            .getElementById(JSON.stringify("actionBtns-modal" + i))
            .appendChild(leftmodal);
          document
            .getElementById(JSON.stringify("left-modal" + i))
            .appendChild(heart2);
          document
            .getElementById(JSON.stringify("left-modal" + i))
            .appendChild(likes_text);
        };

        // const modal = document.querySelector(".card-modal");
        // window.addEventListener("click", outsideClick);

        // function outsideClick(e) {
        //   if (e.target == modal) {
        //     modal.style.display = "none";
        //   }
        // }
        // bigimagemodal.onclick = function () {
        //   modal.style.display = "block";
        // };

        document.getElementById("container").appendChild(card);
        document.getElementById(JSON.stringify("card" + i)).appendChild(top);
        document
          .getElementById(JSON.stringify("top" + i))
          .appendChild(userDetails);
        document.getElementById(JSON.stringify("top" + i)).appendChild(hr);
        document
          .getElementById(JSON.stringify("userDetails" + i))
          .appendChild(profile_img);
        document
          .getElementById(JSON.stringify("profile_img" + i))
          .appendChild(pfp);

        document
          .getElementById(JSON.stringify("userDetails" + i))
          .appendChild(info);
        document.getElementById(JSON.stringify("Name" + i)).appendChild(br);
        document.getElementById(JSON.stringify("Name" + i)).appendChild(br);
        document.getElementById(JSON.stringify("Name" + i)).appendChild(span);
        document.getElementById(JSON.stringify("top" + i)).appendChild(testdiv);
        document
          .getElementById(JSON.stringify("testDiv" + i))
          .appendChild(instalogo);

        document
          .getElementById(JSON.stringify("card" + i))
          .appendChild(imageBox);
        document
          .getElementById(JSON.stringify("imgBox" + i))
          .appendChild(postedPic);

        document
          .getElementById(JSON.stringify("card" + i))
          .appendChild(header4);
        document.getElementById(JSON.stringify("card" + i)).appendChild(hr);

        document
          .getElementById(JSON.stringify("card" + i))
          .appendChild(divAction);
        document
          .getElementById(JSON.stringify("actionBtns" + i))
          .appendChild(divLeft);
        document.getElementById(JSON.stringify("left" + i)).appendChild(heart);
        document
          .getElementById(JSON.stringify("left" + i))
          .appendChild(header5);
      }
      counter = i;
      if (i == 20) {
        const btn = document.getElementById("dugme");
        btn.parentNode.removeChild(btn);
      }
    });

    const deleteModal = document.getElementById("modal-container");
    deleteModal.onclick = function () {
      const modalDeleter = document.getElementById("modal-container");
      modalDeleter.innerHTML = "";
    };
  </script>
</html>
